---
id: "construct"
print_background: true

---
@import "my-style.less"
***
[TOC]
***

# 建筑

## 总览表

|  建筑名称  | 建筑功能                                     | 是否可升级 |
| :--------: | -------------------------------------------- | :--------: |
|  **住房**  | 提高人口上限                                 |     是     |
| **铁匠铺** | 提高单位攻击力、防御力                       |     是     |
|  **仓库**  | 缩短采集路程                                 |     是     |
|  **农庄**  | 每过一段时间生成一定的食物                   |     是     |
|  **矿场**  | 每过一段时间生成一定的黄金                   |     是     |
|  **兵营**  | 为步兵系单位提供增益                         |     是     |
|  **靶场**  | 为弓弩系单位提供增益                         |     是     |
|  **马厩**  | 为骑兵系单位提供增益                         |     是     |
| **兵工厂** | 为攻城武器系与火药系单位生产提供增益         |     是     |
|  **学院**  | 为科技研发提供增益                           |     是     |
|  **市场**  | 为资源互换提供增益                           |     是     |
|  **拒马**  | 吸引火力，阻挡敌方进攻。                     |     是     |
| **驻防点** | 弓弩系单位与火药系单位可以驻扎于此进行射击。 |     是     |

***

## 机制设计

### 建筑建造

地图的三条路上有多个建筑槽位，在游戏开始时均为空闲状态。  
玩家可以在空闲的建筑槽位建造建筑，确定进行建造后建筑槽位将由空闲状态转为占用状态。建造建筑需要花费一定的黄金并等待一定的时间，这段过程称为**建造过程**，建筑必须在建成后才能起效。

建筑拥有防御力与HP，一旦HP归零视为建筑被摧毁，其能提供的所有效果将全部消失，建筑槽位将回归空闲状态。  
通过**修理**可以将建筑的HP回满。  

玩家可以主动**拆除**建筑，这样将可以将占用的建筑槽位空出，视为建筑被摧毁。拆除过程是瞬间的。

!!! warning 注意
    - 升级建筑无法将建筑的HP回满，但是若升级会提高建筑的HP上限，则建筑的当前HP也会按照比例提高。
    - 当玩家开始建造建筑时，建筑的HP即为满格建造过程中的建筑可以被摧毁。

!!! tip 提示
    游戏的不同时期需要的建筑也许会有不同，因此玩家可能需要根据战场形势主动拆除建筑。   

### 建筑修理

当建筑的HP不为满格时，玩家使建筑进入修复状态。  
在建筑进入修复状态时，其每过$s_{i}$时间，就会增长$h_{i}$点HP，同时耗费$c_{i}$点**食物**。其中，$h_{i}$与生产力有关。  
建筑HP回满时，建筑自动退出修复状态，玩家也可以手动选择退出修复状态。

!!! warning 注意
    若建筑在修复时玩家食物耗尽，建筑将不会回复HP，但其仍然将保持修复状态；这种“停滞”的修复状态直到食物重新满足需求才能恢复正常。

!!! tip 提示
    玩家可以通过对处于修复状态的建筑进行长期骚扰拖垮对方的经济。   

### 建筑升级

一个建筑可以向多个方向升级，不同方向的升级可以共存。

建筑一旦被建成，即为其所有升级方向的**LV.1**。下文图表中**LV.1**的造价即为建筑的建造造价。*也就是说，对于同一建筑，其所有升级方向的LV.1的造价都相同*。

!!! example 示例
    如玩家在升级住房时可以选择向**工人人口**升级或**军事人口**升级，每次只能向一个方向升一级，消耗的资源和时间为目标等级的对应花销。
    两个方向的升级可以共存，如住房可以同时为**LV.2 工人人口** + **LV.3 军事人口**。

***

## 详细设计

|***

### 住房

`经济类建筑` 

住房建成后，可以为玩家增加人口上限。

#### 升级

住房具有两个方向的升级。

| 升级方向     | LV1 | LV2 | LV3 | LV4 | LV5 |
| ------------ | :-: | :-: | :-: | :-: | :-: |
| **工人人口** | +3  | +2  | +2  | +2  | +5  |
| **军事人口** | +10 | +5  | +5  | +5  | +15 |

不同升级的花销：

| 升级方向     |     LV1     |    LV2     |    LV3     |    LV4     |     LV5     |
| ------------ | :---------: | :--------: | :--------: | :--------: | :---------: |
| **工人人口** | (5金 + 10s) | (2金 + 5s) | (2金 + 5s) | (2金 + 5s) | (5金 + 15s) |
| **军事人口** |      ^      | (2金 + 5s) | (2金 + 5s) | (2金 + 5s) | (5金 + 15s) |

升级能提供的基本数值属性增益：
| 升级方向     | LV1 |   LV2    |   LV3    |   LV4    |   LV5    |
| ------------ | :-: | :------: | :------: | :------: | :------: |
| **工人人口** | --  | + 10% HP | + 10% HP | + 10% HP | + 13% HP |
| **军事人口** |  ^  | + 10% HP | + 10% HP | + 10% HP | + 13% HP |

|***

### 铁匠铺

m`军事类建筑`

!!! note 解锁路线
    ``` mermaid
    flowchart LR
        sgy[手工业]:::target;
        sgy --> zz[铸造]:::notmain---> yj[冶金]:::notmain;
        sgy --> szj[锁子甲]:::notmain---> bj[板甲]:::notmain;
    classDef notmain fill:#d1d1d1, stroke:#707070;
    classDef target fill:#fad866, stroke:#c16b1f;
    ```
    需要研发科技<tech>手工业</tech>。

玩家可以在铁匠铺中升级全场单位的攻击力或防御力。

!!! warning 注意
    铁匠铺的升级不是科技，与其他建筑一样，当铁匠铺被摧毁后，其提供的所有增益效果将全部消失。

#### 升级

铁匠铺具有两个方向的升级。

| 升级方向   | LV1  | LV2 | LV3 |
| ---------- | :--: | :-: | :-: |
| **攻击力** | +10% | +5% | +5% |
| **防御力** | +10% | +5% | +5% |

不同升级的花销：

| 升级方向   |     LV1     |     LV2     |     LV3     |
| ---------- | :---------: | :---------: | :---------: |
| **攻击力** | (8金 + 20s) | (4金 + 10s) | (4金 + 10s) |
| **防御力** |      ^      | (4金 + 10s) | (4金 + 10s) |

升级能提供的基本数值属性增益：
| 升级方向   | LV1 |     LV2      |     LV3      |
| ---------- | :-: | :----------: | :----------: |
| **攻击力** | --  |   + 10% HP   |   + 10% HP   |
| **防御力** |  ^  | + 10% 防御力 | + 10% 防御力 |


|***

### 仓库

`经济类建筑`

!!! note 解锁路线
    ``` mermaid
    flowchart LR
        A[手推车] --> D[水利]:::notmain;
        A --> B["行政机构"]:::target;
        A --> C[采矿]:::notmain;
        D --> E[农学]:::notmain;
        C --> I[矿井勘探]:::notmain;
        B --> E ---> d0[历法]:::notmain;
        B --> J[教育]:::notmain---> d1[经济]:::notmain;
        d1 --> K[工程技术]:::notmain
        d1 --> L[交通运输]:::notmain
        B --> I---> d2[化学]:::notmain;
    classDef notmain fill:#d1d1d1, stroke:#707070;
    classDef target fill:#fad866, stroke:#c16b1f;
    ```
    需要研发科技<tech>行政机构</tech>。

工人可以在采集完成后将物资直接送到仓库进行卸货，而不需要返回基地。

仓库可以容纳所有资源的存储，尽管它只供其所在路上的工人使用。

!!! example 示例
    譬如，玩家将仓库建设在了上路，则只有在上路工作的工人才能将资源放置在上路的仓库中。

仓库建成后，对于正在返回路程中的工人，并不会将返回目的地立即移动至仓库，而是在仓库和基地中取**距离自己最近的点位**作为自己当前返回的目的地，也就是说，无论仓库何时建成，工人都能自动选择最合适的卸货点。

!!! tip 提示
    当一条路上建有多个仓库时，工人只认最新建成的仓库。  
    仓库被摧毁后，工人会将资源卸载至该仓库建成前的资源卸载点。

#### 升级

仓库只有一个方向的升级。

| 升级方向     | LV1 |  LV2  |  LV3  |
| ------------ | :-: | :---: | :---: |
| **卸货速度** | --  | -2.5% | -2.5% |

不同升级的花销：

| 升级方向     |     LV1     |    LV2     |    LV3     |
| ------------ | :---------: | :--------: | :--------: |
| **卸货速度** | (6金 + 10s) | (2金 + 5s) | (2金 + 5s) |

升级能提供的基本数值属性增益：
| 升级方向     | LV1 |   LV2    |   LV3    |
| ------------ | :-: | :------: | :------: |
| **卸货速度** | --  | + 10% HP | + 10% HP |

|***

### 农庄

`经济类建筑`

!!! note 解锁路线
    ``` mermaid
    flowchart LR
        A[手推车] --> D[水利];
        A --> B["行政机构"];
        A --> C[采矿]:::notmain;
        D --> E[农学]:::target;
        C --> I[矿井勘探]:::notmain;
        B --> E ---> d0[历法]:::notmain;
        B --> J[教育]:::notmain---> d1[经济]:::notmain;
        d1 --> K[工程技术]:::notmain
        d1 --> L[交通运输]:::notmain
        B --> I---> d2[化学]:::notmain;
    classDef notmain fill:#d1d1d1, stroke:#707070;
    classDef target fill:#fad866, stroke:#c16b1f;
    ```
    需要研发科技<tech>农学</tech>。

农庄建成后，其每过$t_{i}$时间产生$p_{i}$点食物，其中$p_{i}=k_{i}\cdot {productivity}$（$k_{i}$为转化率，${productivity}$ 为生产力）。

#### 升级

农庄有两个方向的升级。

| 升级方向     | LV1 | LV2  | LV3  |
| ------------ | :-: | :--: | :--: |
| **转化率**   | --  | +10% | +10% |
| **产出时间** |  ^  | -30% | -30% |

不同升级的花销：

| 升级方向     |     LV1      |     LV2     |     LV3     |
| ------------ | :----------: | :---------: | :---------: |
| **转化率**   | (10金 + 15s) | (5金 + 10s) | (5金 + 10s) |
| **产出时间** |      ^       | (5金 + 10s) | (5金 + 10s) |

升级能提供的基本数值属性增益：
| 升级方向     | LV1 |  LV2   |  LV3   |
| ------------ | :-: | :----: | :----: |
| **转化率**   | --  | +30%HP | +10%HP |
| **产出时间** |  ^  | +30%HP | +10%HP |

|***

### 矿场

`经济类建筑`

!!! note 解锁路线
    ``` mermaid
    flowchart LR
        A[手推车] --> D[水利]:::notmain;
        A --> B["行政机构"];
        A --> C[采矿];
        D --> E[农学]:::notmain;
        C --> I[矿井勘探]:::target;
        B --> E ---> d0[历法]:::notmain;
        B --> J[教育]:::notmain---> d1[经济]:::notmain;
        d1 --> K[工程技术]:::notmain
        d1 --> L[交通运输]:::notmain
        B --> I---> d2[化学]:::notmain;
    classDef notmain fill:#d1d1d1, stroke:#707070;
    classDef target fill:#fad866, stroke:#c16b1f;
    ```
    需要研发科技<tech>矿井勘探</tech>。

农庄建成后，其每过$t_{i}$时间产生$p_{i}$点食物，其中$p_{i}=k_{i}\cdot {productivity}$（$k_{i}$为转化率，${productivity}$ 为生产力）。

#### 升级

矿场有两个方向的升级。

| 升级方向     | LV1 | LV2  | LV3  |
| ------------ | :-: | :--: | :--: |
| **转化率**   | --  | +10% | +10% |
| **产出时间** |  ^  | -30% | -30% |

不同升级的花销：

| 升级方向     |     LV1      |     LV2     |     LV3     |
| ------------ | :----------: | :---------: | :---------: |
| **转化率**   | (10金 + 15s) | (5金 + 10s) | (5金 + 10s) |
| **产出时间** |      ^       | (5金 + 10s) | (5金 + 10s) |

升级能提供的基本数值属性增益：
| 升级方向     | LV1 |  LV2   |  LV3   |
| ------------ | :-: | :----: | :----: |
| **转化率**   | --  | +30%HP | +10%HP |
| **产出时间** |  ^  | +30%HP | +10%HP |

|***

### 兵营

m`军事类建筑`

!!! note 解锁路线
    ``` mermaid
    flowchart LR
        jsxl[军事训练] ---> zs[战术]:::notmain;
        jsxl ---> jgz[军功制]:::target;
        zs ---> md[马镫]:::notmain;
        zs ---> yy[医药]:::notmain;
        zs ---> fhg[复合弓]:::notmain;
        md ---> jsgc[军事工程]:::notmain ---> gcqx[攻城器械]:::notmain;
        md ---> mpyz[马匹育种]:::notmain;
        gcqx ---> hy[火药]:::notmain ---> hp[火炮]:::notmain;
        gcqx ---> jsjs[军事技术]:::notmain;

    classDef notmain fill:#d1d1d1, stroke:#707070;
    classDef target fill:#fad866, stroke:#c16b1f;
    ```
    需要研发科技<tech>军功制</tech>。

兵营建成后，可以为步兵系单位提供增益。

!!! warning 注意
    兵营的升级不是科技，与其他建筑一样，当兵营被摧毁后，其提供的所有增益效果将全部消失。

#### 升级

兵营有三个方向的升级。

| 升级方向       | LV1  | LV2  | LV3  |
| -------------- | :--: | :--: | :--: |
| **防御力**     | +20% | +10% | +10% |
| **预备役规模** | +20% | +10% | +10% |
| **生产速度**   | -10% | -5%  | -5%  |

不同升级的花销：

| 升级方向       |     LV1      |      LV2      |     LV3      |
| -------------- | :----------: | :-----------: | :----------: |
| **防御力**     | (20金 + 15s) | (10金 + 7.5s) | (10金 + 10s) |
| **预备役规模** |      ^       | (10金 + 7.5s) | (10金 + 10s) |
| **生产速度**   |      ^       | (10金 + 7.5s) | (10金 + 10s) |

升级能提供的基本数值属性增益：
| 升级方向       | LV1 |  LV2   |  LV3   |
| -------------- | :-: | :----: | :----: |
| **防御力**     | --  | +30%HP | +15%HP |
| **预备役规模** |  ^  | +30%HP | +15%HP |
| **生产速度**   |  ^  | +30%HP | +15%HP |

|***

### 靶场

m`军事类建筑`

!!! note 解锁路线
    ``` mermaid
    flowchart LR
        jsxl[军事训练] ---> zs[战术];
        jsxl ---> jgz[军功制]:::notmain;
        zs ---> md[马镫]:::notmain;
        zs ---> yy[医药]:::notmain;
        zs ---> fhg[复合弓]:::target;
        md ---> jsgc[军事工程]:::notmain ---> gcqx[攻城器械]:::notmain;
        md ---> mpyz[马匹育种]:::notmain;
        gcqx ---> hy[火药]:::notmain ---> hp[火炮]:::notmain;
        gcqx ---> jsjs[军事技术]:::notmain;

    classDef notmain fill:#d1d1d1, stroke:#707070;
    classDef target fill:#fad866, stroke:#c16b1f;
    ```
    需要研发科技<tech>复合弓</tech>。

靶场建成后，可以为弓弩系单位提供增益。

!!! warning 注意
    靶场的升级不是科技，与其他建筑一样，当靶场被摧毁后，其提供的所有增益效果将全部消失。

#### 升级

靶场有三个方向的升级。

| 升级方向     | LV1  | LV2  | LV3  |
| ------------ | :--: | :--: | :--: |
| **移动速度** | +20% | +10% | +10% |
| **射击精准** | +20% | +10% | +10% |
| **攻击力**   | +10% | +5%  | +5%  |

不同升级的花销：

| 升级方向     |     LV1      |      LV2      |     LV3      |
| ------------ | :----------: | :-----------: | :----------: |
| **移动速度** | (20金 + 15s) | (10金 + 7.5s) | (10金 + 10s) |
| **射击精准** |      ^       | (10金 + 7.5s) | (10金 + 10s) |
| **攻击力**   |      ^       | (10金 + 7.5s) | (10金 + 10s) |

升级能提供的基本数值属性增益：
| 升级方向     | LV1 |  LV2   |  LV3   |
| ------------ | :-: | :----: | :----: |
| **移动速度** | --  | +30%HP | +15%HP |
| **射击精准** |  ^  | +20%HP | +15%HP |
| **攻击力**   |  ^  | +10%HP | +10%HP |

|***

### 马厩

m`军事类建筑`

!!! note 解锁路线
    ``` mermaid
    flowchart LR
        jsxl[军事训练] ---> zs[战术];
        jsxl ---> jgz[军功制]:::notmain;
        zs ---> md[马镫];
        zs ---> yy[医药]:::notmain;
        zs ---> fhg[复合弓]:::notmain;
        md ---> jsgc[军事工程]:::notmain ---> gcqx[攻城器械]:::notmain;
        md ---> mpyz[马匹育种]:::target;
        gcqx ---> hy[火药]:::notmain ---> hp[火炮]:::notmain;
        gcqx ---> jsjs[军事技术]:::notmain;

    classDef notmain fill:#d1d1d1, stroke:#707070;
    classDef target fill:#fad866, stroke:#c16b1f;
    ```
    需要研发科技<tech>马匹育种</tech>。

马厩建成后，可以为骑兵系单位提供增益。

!!! warning 注意
    马厩的升级不是科技，与其他建筑一样，当马厩被摧毁后，其提供的所有增益效果将全部消失。

#### 升级

马厩有三个方向的升级。

| 升级方向     | LV1  | LV2  | LV3  |
| ------------ | :--: | :--: | :--: |
| **移动速度** | +20% | +10% | +10% |
| **攻击间隔** | +20% | +10% | +10% |
| **造价**     | -10% | -5%  | -5%  |

不同升级的花销：

| 升级方向     |     LV1      |      LV2      |     LV3      |
| ------------ | :----------: | :-----------: | :----------: |
| **移动速度** | (20金 + 15s) | (10金 + 7.5s) | (10金 + 10s) |
| **射击精准** |      ^       | (10金 + 7.5s) | (10金 + 10s) |
| **造价**     |      ^       | (10金 + 7.5s) | (10金 + 10s) |

升级能提供的基本数值属性增益：
| 升级方向     | LV1 |  LV2   |  LV3   |
| ------------ | :-: | :----: | :----: |
| **移动速度** | --  | +30%HP | +15%HP |
| **射击精准** |  ^  | +20%HP | +15%HP |
| **造价**     |  ^  | +10%HP | +10%HP |

|***

### 兵工厂

m`军事类建筑`

!!! note 解锁路线
    ``` mermaid
    flowchart LR
        jsxl[军事训练] ---> zs[战术];
        jsxl ---> jgz[军功制]:::notmain;
        zs ---> md[马镫];
        zs ---> yy[医药]:::notmain;
        zs ---> fhg[复合弓]:::notmain;
        md ---> jsgc[军事工程] ---> gcqx[攻城器械];
        md ---> mpyz[马匹育种]:::notmain;
        gcqx ---> hy[火药]:::notmain ---> hp[火炮]:::notmain;
        gcqx ---> jsjs[军事技术]:::target;

    classDef notmain fill:#d1d1d1, stroke:#707070;
    classDef target fill:#fad866, stroke:#c16b1f;
    ```
    需要研发科技<tech>军事技术</tech>。

兵工厂建成后，可以为攻城武器系与火药系单位提供增益。

!!! warning 注意
    兵工厂的升级不是科技，与其他建筑一样，当兵工厂被摧毁后，其提供的所有增益效果将全部消失。

#### 升级

兵工厂有三个方向的升级。

| 升级方向     | LV1  | LV2  | LV3  |
| ------------ | :--: | :--: | :--: |
| **攻击力**   | +20% | +10% | +10% |
| **攻击间隔** | -20% | -10% | -10% |
| **精准度**   | +10% | +5%  | +5%  |

不同升级的花销：

| 升级方向     |     LV1      |      LV2      |     LV3      |
| ------------ | :----------: | :-----------: | :----------: |
| **攻击力**   | (20金 + 15s) | (10金 + 7.5s) | (10金 + 10s) |
| **攻击间隔** |      ^       | (10金 + 7.5s) | (10金 + 10s) |
| **精准度**   |      ^       | (10金 + 7.5s) | (10金 + 10s) |

升级能提供的基本数值属性增益：
| 升级方向     | LV1 |  LV2   |  LV3   |
| ------------ | :-: | :----: | :----: |
| **攻击力**   | --  | +30%HP | +15%HP |
| **攻击间隔** |  ^  | +20%HP | +15%HP |
| **精准度**   |  ^  | +10%HP | +10%HP |

|***